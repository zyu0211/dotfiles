" å‚è€ƒï¼šhttps://github.com/JetBrains/ideavim

" leader é”®
let g:mapleader = ' '

" ==================================
" ğŸ°ğŸ°ğŸ° Extensions ğŸ°ğŸ°ğŸ°
" ==================================

Plug 'machakann/vim-highlightedyank'    " Highlight copied text
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-surround'

Plug 'preservim/nerdtree'
nmap <leader>e :NERDTreeFind<CR>
"åœ¨ç›®å½•ä¸­ï¼ŒæŒ‰ä¸‹ go æ‰“å¼€æ–‡ä»¶å¹¶ä¿æŒå…‰æ ‡åœ¨ç›®å½•
"åœ¨ç›®å½•ä¸­ï¼ŒæŒ‰ä¸‹ gi ä»¥ä¸Šä¸‹å¹¶æ’çª—å£å½¢å¼æ‰“å¼€æ–‡ä»¶(å¹¶å…³é—­ç›®å½•)
"åœ¨ç›®å½•æ ‘ä¸­ï¼Œä½¿ç”¨ç©ºæ ¼é¢„è§ˆæ–‡ä»¶
"å…‰æ ‡åœ¨ç›®å½•æ—¶ï¼ŒæŒ‰Escå›åˆ°ç¼–è¾‘å™¨

" Ideaéœ€å®‰è£…æ’ä»¶ï¼šIdeaVim-EasyMotion
Plug 'easymotion/vim-easymotion'
let g:EasyMotion_do_mapping = 0
nmap <leader><leader> <Plug>(easymotion-s)

Plug 'vim-scripts/ReplaceWithRegister'
nmap rs  <Plug>ReplaceWithRegisterOperator
nmap rss <Plug>ReplaceWithRegisterLine
xmap rs  <Plug>ReplaceWithRegisterVisual

" ==================================
" ğŸ§ğŸ§ğŸ§ Basic settings ğŸ§ğŸ§ğŸ§
" ==================================

" ç³»ç»Ÿå‰ªåˆ‡æ¿
set clipboard^=unnamed,unnamedplus
" xæ¨¡å¼é»è´´åé‡æ–°å¤åˆ¶è¢«é»è´´å†…å®¹
xnoremap p pgvy

" è®¾ç½®è¿”å›normalæ¨¡å¼æ—¶å›åˆ°è‹±æ–‡è¾“å…¥æ³•
" Ideaéœ€å®‰è£…æ’ä»¶ï¼šIdeaVimExtension
set keep-english-in-normal

" å°†æœç´¢åŒ¹é…çš„æ–‡æœ¬é«˜äº®æ˜¾ç¤º
set hlsearch
" æœç´¢æ—¶è·³åˆ°æœç´¢ç›®æ ‡å¤„
set incsearch
" å¿½ç•¥å¤§å°å†™æœç´¢
set ignorecase
" æ™ºèƒ½æœç´¢å¤§å°å†™
set smartcase

" è¡Œå·æ˜¾ç¤º
set number
" ç›¸å¯¹è¡Œå·
set relativenumber

" æ»šåŠ¨æ—¶ä¿æŒä¸Šä¸‹è¾¹è·
set scrolloff=8
" è¯¥è®¾ç½®å¯ä»¥å°†å…‰æ ‡å®šä½åˆ°çª—å£ä¸­é—´ä½ç½®
" set scrolloff=999

" ===================================
" ğŸŒğŸŒğŸŒ No Leader Keymaps ğŸŒğŸŒğŸŒ
" ===================================

" Esc
imap jk <ESC>

" å–æ¶ˆé«˜äº®
nmap <ESC> :noh<CR>

nmap H ^
nmap L $

" å¤åˆ¶é»è´´
xmap <C-c> y
map <C-S-V> p
imap <C-S-V> <C-r>+

" å¤åˆ¶æ•´ä¸ªç¼“å†²åŒº
nmap <leader>y mmggVGy`m

"=======ActionåŠ¨ä½œè·å–æ–¹å¼
"=======ShiftShift -> IdeaVim: track action Ids

" å°†Ctrl + s æ˜ å°„ä¸ºä¿å­˜æ–‡æ¡£
nmap <C-S> <action>(SaveAll)
imap <C-S> <Esc><action>(SaveAll)

" æ‰¾åˆ°ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªä»£ç å»ºè®®
imap <C-[> <action>(EditorUp)
imap <C-]> <action>(EditorDown)

" åé€€/åé€€
nmap <C-o> <action>(Back)
nmap <C-i> <action>(Forward)

" è·³è½¬ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªtab
nmap [t <action>(PreviousTab)
nmap ]t <action>(NextTab)

" è·³è½¬ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªmethodå£°æ˜å¤„
nmap [f <action>(MethodUp)
nmap ]f <action>(MethodDown)

" è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š
nmap ge <action>(GotoNextError)
" åœ¨æºä»£ç å’Œæµ‹è¯•ä»£ç ä¹‹é—´å¿«é€Ÿåˆ‡æ¢
nmap gt <action>(GotoTest)
" è·³è½¬åˆ°å½“å‰æ¥å£æˆ–æŠ½è±¡ç±»çš„å®ç°å¤„
nmap ga <action>(GotoImplementation)

" ç±»å‹å£°æ˜
nmap go <action>(GotoTypeDeclaration)
" ç±»æŸ¥æ‰¾
nmap gw <action>(GotoClass)
" ç±»æ–¹æ³•æˆ–ç±»æˆå‘˜å­—æ®µæŸ¥æ‰¾
nmap gs <action>(FileStructurePopup)

" è·³è½¬åˆ°å®šä¹‰æˆ–å¼•ç”¨å¤„
nmap gd <action>(GotoDeclaration)
" æŸ¥æ‰¾æ‰€æœ‰å¼•ç”¨ï¼Œç±»ä¼¼vimä¸­çš„quickfixåˆ—è¡¨
nmap gr <action>(FindUsages)
" æ‰¾åˆ°è¢«å®ç°çš„ç±»æˆ–æ–¹æ³•
nmap gp <action>(GotoSuperMethod)

" æ³¨é‡Š
nmap gcc <action>(CommentByLineComment)
xmap gc <action>(CommentByLineComment)<Esc>

" æ‰“å¼€ç»ˆç«¯
nmap `` <action>(ActivateTerminalToolWindow)

" ç±»wildfire
nmap <Enter> <action>(EditorSelectWord)
nmap <BS> <action>(EditorUnSelectWord)
xmap <Enter> <action>(EditorSelectWord)
xmap <BS> <action>(EditorUnSelectWord)

" ===================================
" â­ï¸â­ï¸â­ï¸ Leader Keymaps â­ï¸â­ï¸â­ï¸
" ===================================

" ä¿å­˜ä¸é€€å‡º
nmap <leader>q :q<CR>
nmap <leader>w :w<CR>

"å…³é—­æ‰€æœ‰æ ‡ç­¾é¡µ
nmap <leader>ca <action>(CloseAllEditors)
"å…³é—­å½“å‰æ ‡ç­¾é¡µ
nmap <leader>cd :action CloseEditor<CR>
"å…³é—­å…¶ä»–æ ‡ç­¾é¡µ
nmap <leader>co :action CloseAllEditorsButActive<CR>

" æ‰“å¼€æ–‡ä»¶åˆ—è¡¨
nmap <leader>e <action>(ActivateProjectToolWindow)

" å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæå–ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•(Ctrl + Alt + M)
vmap <leader>em <action>(ExtractMethod)
" å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæŠ½å–ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢é€‰ä¸­çš„ä»£ç ç‰‡æ®µä¸ºæ–°çš„å¸¸é‡å¼•ç”¨(Ctrl + Alt + C)
vmap <leader>ec <action>(IntroduceConstant)
" å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µè½¬åŒ–ä¸ºä¸€ä¸ªæ–°çš„å­—æ®µï¼Œå¹¶è‡ªåŠ¨å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæ›¿æ¢ä¸ºå¯¹è¯¥å­—æ®µçš„å¼•ç”¨(Ctrl + Alt + F)
vmap <leader>ef <action>(IntroduceField)
" å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæŠ½å–ä¸ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢é€‰ä¸­çš„ä»£ç ç‰‡æ®µä¸ºæ–°çš„å˜é‡å¼•ç”¨(Ctrl + Alt + V)
vmap <leader>ev <action>(IntroduceVariable)

" æ–‡ä»¶æŸ¥æ‰¾(Ctrl + n)
nmap <leader>ff <Action>(GotoFile)
"å°†å½“å‰ç¼–è¾‘çš„æ–‡ä»¶åœ¨é¡¹ç›®è§†å›¾ä¸­è¿›è¡Œé€‰ä¸­å®šä½(Alt + F1)
nmap <leader>fl <action>(SelectInProjectView)
" å…¨å±€æ¨¡ç³Šæœç´¢(Ctrl + Shift + F)
nmap <leader>fg <Action>(FindInPath)
" ç­‰ä»·äºideaä¸­çš„shift+shift
nmap <leader>fs <Action>(SearchEverywhere)
"æ‰“å¼€ "Find Action"ï¼ˆæŸ¥æ‰¾åŠ¨ä½œï¼‰å¯¹è¯æ¡†(Ctrl + Shift + A)
nmap <leader>fc <action>(GotoAction)
" å…¨å±€æ›¿æ¢
nmap <leader>fr <Action>(ReplaceInPath)
" æ ¼å¼åŒ–
nmap <leader>fm <Action>(ReformatCode)

"ç”Ÿæˆæ„é€ å™¨
nmap <leader>gc :action GenerateConstructor<CR>
"ç”Ÿæˆgetter
nmap <leader>gg :action GenerateGetter<CR>
"ç”Ÿæˆsetter
nmap <leader>gs :action GenerateSetter<CR>
"ç”Ÿæˆsetterå’Œgetter
nmap <leader>ga <action>(GenerateGetterAndSetter)
"ç”Ÿæˆ equals() å’Œ hashcode() çš„é‡å†™æ–¹æ³•
nmap <leader>ge <action>(GenerateEquals)
"ç”ŸæˆtoString
nmap <leader>gt <action>(Actions.ActionsPlugin.GenerateToString)
"ç”Ÿæˆé‡å†™æ–¹æ³•
nmap <leader>go <action>(OverrideMethods)

"åœ¨å½“å‰ç›®å½•æ–°å»ºæ–‡ä»¶å¤¹
nmap <leader>nd <action>(NewDir)
" æ–°å»ºç±»
nmap <leader>nc <Action>(NewClass)

" ======çª—å£ç®¡ç†======
"å‘å³æ‹†åˆ†æ ‡ç­¾é¡µ
nmap <leader>wv <action>(MoveTabRight)
"å‘ä¸‹æ‹†åˆ†æ ‡ç­¾é¡µ
nmap <leader>ws <action>(MoveTabDown)
"åœ¨å¦ä¸€è¾¹æ‰“å¼€ï¼ˆå‰ææ˜¯æœ‰å¦ä¸€è¾¹çš„åˆ†å‰²çª—å£ï¼‰
nmap <leader>wo <action>(MoveEditorToOppositeTabGroup)
"å‘å³å¤åˆ¶æ ‡ç­¾é¡µ
nmap <leader>wc <action>(SplitVertically)
"å–æ¶ˆæ‰€æœ‰åˆ†å‰²çª—å£
nmap <leader>wq <action>(UnsplitAll)
"å…³é—­å½“å‰çª—å£æˆ–åˆ†å‰²çª—æ ¼
nmap <leader>wc <c-w>c
"å–æ¶ˆæ‹†åˆ†å½“å‰åˆ†å‰²çª—å£
nmap <leader>wu <action>(Unsplit)
"è·³è½¬åˆ°å·¦è¾¹çš„åˆ†å‰²çª—å£
nmap <leader>h <c-w>h
"è·³è½¬åˆ°å³è¾¹çš„çª—å£
nmap <leader>l <c-w>l
"è·³è½¬åˆ°ä¸‹è¾¹çš„åˆ†å‰²çª—å£
nmap <leader>j <c-w>j
"è·³è½¬åˆ°ä¸Šè¾¹çš„åˆ†å‰²çª—å£
nmap <leader>k <c-w>k

"å±•å¼€æ‰€æœ‰ä»£ç æŠ˜å åŒºåŸŸ(Ctrl + Shift + åŠ å·é”®)
nmap <leader>zo <action>(ExpandAllRegions)
"æŠ˜å æ‰€æœ‰ä»£ç æŠ˜å åŒºåŸŸ(Ctrl + Shift + å‡å·é”®)
nmap <leader>zc <action>(CollapseAllRegions)

" ç¿»è¯‘
xmap <leader>t <Action>($EditorTranslateAction)<Esc>
nmap <leader>T <Action>($ShowTranslationDialogAction)
nmap <leader>t viw<Action>($EditorTranslateAction)

" é‡å‘½å
nmap <leader>r <Action>(RenameElement)

" æ‰“å¼€æœ€è¿‘çš„é¡¹ç›®
nmap <leader>rp <Action>($LRU)
" é€‰æ‹©ä¸»é¢˜
nmap <leader>ct <Action>(ChangeLaf)
" vimæ¨¡å¼å¼€å…³
nmap <leader>vim <Action>(VimPluginToggle)
" é€‰æ‹©idea keymap
nmap <leader>mp <Action>(ChangeKeymap)

" ======debug======
" æ‰“æ–­ç‚¹/è§£é™¤æ–­ç‚¹
nmap <leader>dp <Action>(ToggleLineBreakpoint)
" è°ƒè¯•
nmap <leader>db <Action>(Debug)
" ======run======
" è¿è¡Œå½“å‰ç¼–è¾‘å™¨ä¸­çš„æ–‡ä»¶æˆ–ç±»(Shift + F10)
nmap <leader>rc :action RunClass<CR>
" é‡æ–°è¿è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œçš„ç¨‹åºæˆ–æµ‹è¯•(Ctrl+Shift + F10)
nmap <leader>rr <action>(Rerun)
" é‡æ–°è¿è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œçš„æµ‹è¯•ï¼ˆUnit Testsï¼‰(Ctrl + Shift + F10)
nmap <leader>rt <action>(RerunTests)
" è¿è¡Œ
map <leader>ru <action>(Run)
" åœæ­¢è¿è¡Œ
nmap <leader>st <action>(Stop) <action>(Stop)

